<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title></title>

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600;700&display=swap" rel="stylesheet">

    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">

    <link rel="stylesheet" href="./src/css/style.css">
</head>
<body>
    <main class="app">
        <section class="card">
            <button class="theme-btn" id="themeBtn" title="Changer le theme" aria-label="Changer le theme">
                <i class="bi bi-moon"></i>
            </button>

            <div class="banner" id="banner">
                <div class="banner-overlay"></div>
            </div>

            <div class="profile-top">
                <img id="avatar" class="avatar" src="" alt="Profile Avatar">
                <div class="identity">
                    <h1 class="name" id="name"></h1>
                    <div class="meta">
                        <span class="handle" id="handle"></span>
                        <span class="dot">â€¢</span>
                        <span class="status" id="status"></span>
                    </div>
                </div>
            </div>

            <section class="panel about">
                <h2>About</h2>
                <p class="tagline" id="tagline"></p>
            </section>

            <section class="panel socials">
                <h2>Socials</h2>
                <div class="social-badges" id="socialLinks"></div>
            </section>

            <section class="panel projects">
                <div class="section-header">
                    <h2>Projects</h2>
                    <span class="count" id="projectCount"></span>
                </div>
                <div class="project-grid" id="projectsGrid"></div>
            </section>
        </section>
    </main>

    <script src="./config.js"></script>
    <script>
        function initPage() {
            document.getElementById('name').textContent = config.user.name;
            document.getElementById('tagline').textContent = config.user.tagline;
            document.getElementById('avatar').src = config.user.avatar;
            document.title = config.user.name || 'Profile';

            const handle = document.getElementById('handle');
            handle.textContent = config.user.handle || '@handle';

            const status = document.getElementById('status');
            status.textContent = config.user.status || 'Disponible';

            const banner = document.getElementById('banner');
            banner.style.backgroundImage = `url('${config.user.banner}')`;

            const socialContainer = document.getElementById('socialLinks');
            socialContainer.innerHTML = '';
            config.socialNetworks.forEach(social => {
                const link = document.createElement('a');
                link.href = social.link;
                link.target = '_blank';
                link.rel = 'noopener noreferrer';
                link.className = 'social-badge';
                link.title = social.name;
                link.innerHTML = `<i class="bi ${social.icon}"></i><span>${social.name}</span>`;
                socialContainer.appendChild(link);
            });

            const projectsGrid = document.getElementById('projectsGrid');
            projectsGrid.innerHTML = '';
            config.projects.forEach(project => {
                const card = document.createElement('a');
                card.href = project.link;
                card.target = '_blank';
                card.rel = 'noopener noreferrer';
                card.className = 'project-card';
                const tags = Array.isArray(project.tags) && project.tags.length
                    ? `<div class="tags">${project.tags.map(tag => `<span class="tag">${tag}</span>`).join('')}</div>`
                    : '';
                card.innerHTML = `
                    <div class="project-head">
                        <h3>${project.title}</h3>
                        <i class="bi bi-arrow-up-right"></i>
                    </div>
                    <p>${project.description}</p>
                    ${tags}
                `;
                projectsGrid.appendChild(card);
            });

            document.getElementById('projectCount').textContent = `${config.projects.length} projets`;

            if (config.darkTheme) {
                applyDarkThemeColors();
            }
        }

        const themeBtn = document.getElementById('themeBtn');
        const body = document.body;
        const savedTheme = localStorage.getItem('theme') || 'dark';
        body.setAttribute('data-theme', savedTheme);
        updateThemeIcon(savedTheme);

        themeBtn.addEventListener('click', () => {
            const currentTheme = body.getAttribute('data-theme');
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            body.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);
            updateThemeIcon(newTheme);
        });

        function updateThemeIcon(theme) {
            const icon = themeBtn.querySelector('i');
            icon.className = theme === 'dark' ? 'bi bi-sun' : 'bi bi-moon';
        }

        function applyDarkThemeColors() {
            if (config.darkTheme && body.getAttribute('data-theme') === 'dark') {
                const root = document.documentElement;
                root.style.setProperty('--bg-dark', config.darkTheme.background || 'radial-gradient(circle at top, #1c2233, #0e121b 55%, #0b0f16)');
                root.style.setProperty('--card-dark', config.darkTheme.cardBackground || 'rgba(19, 23, 34, 0.92)');
                root.style.setProperty('--accent', config.darkTheme.accentColor || '#5fbad8');
                root.style.setProperty('--text-dark', config.darkTheme.textColor || '#f2f5f8');
            }
        }

        document.addEventListener('DOMContentLoaded', initPage);
    </script>
</body>
</html>
